# Note to myself about the files in this folder:

The main change in these files as opposed to those in `v4` is that now `prep_subregions()` will allow potential new subregions to share new points that are very close to the border between the subregions. This is fairly simply implemented via the inclusion of a `point_share_tol` parameter that `prep_subregions()` takes.

I believe that allowing a new subregion to contain point(s) that it would otherwise not include, due to using `point_share_tol > 0`, can lead to significant differences in how the EI optimization for a new subregion proceeds at the end of `split_and_fit()`.  I *think* this is because the Gaussian process model for a subregion is different when it includes one or more extra points, hence the EI optimization (which relies on the Gaussian process model) can lead to a very different optimized value of EI, occurring at a very different point within the domain of the objective function.

Note: Another change that I had to make to `v5` as opposed to `v4` is to augment my checks in `prep_subregions()`. In `v4`, `prep_subregions()` checks the range of points in a proposed subregion, on the given `split_dimension`. This is done using the `frange()` function. With `point_share_tol_param = 0`, this should be bounded above by the actual region width. However, with `point_share_tol_param > 0`, the range of points can exceed the actual region width, so I had to add a check of the actual region width after the check on the range of points. I am not sure whether it is necessary to have both checks---maybe I can just use the new check of the actual region width. I guess I will have to test more to see.

Note 2: I'm going to have to rewrite this readme, becaues implementing point sharing is more complicated than I realized. For example, through point-sharing, a region may come to contain points that aren't actually in the region, and this can mess up percentile calculations. In particular, if a region contains many points that are beyond the region bounds, then a split point may be proposed that isn't actually within the region bounds. I have tried to rectify this in `split_and_fit()` by now computing percentiles based only on points that are actually in the region. (There is an issue here because it seems like the region bounds might be stored to fewer decimal places than the observation coordinates, so when I filter for points within the region bounds, I round both the region bounds and the relevant observation coordinates to 4 decimal places.)